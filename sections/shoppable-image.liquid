{%- comment -%}
  Interactive shoppable image with product hotspots.
  Users can click hotspots to view product details and add to cart.

  @example
  {% section 'shoppable-image' %}
{%- endcomment -%}

{%- style -%}
  #shopify-section-{{ section.id }} {
    --hotspot-size: {{ section.settings.hotspot_size }}px;
    --hotspot-color: {{ section.settings.hotspot_color }};
    --hotspot-pulse-color: {{ section.settings.hotspot_pulse_color }};
    --card-bg: {{ section.settings.card_background }};
    --card-width: {{ section.settings.card_width }}px;
  }
{%- endstyle -%}

<section class="shoppable-image section" data-section-id="{{ section.id }}">
  <div class="container">
    {%- if section.settings.title != blank -%}
      <header class="shoppable-image__header">
        {%- if section.settings.subtitle != blank -%}
          <p class="shoppable-image__subtitle">{{ section.settings.subtitle }}</p>
        {%- endif -%}
        <h2 class="shoppable-image__title">{{ section.settings.title }}</h2>
      </header>
    {%- endif -%}

    <div class="shoppable-image__wrapper">
      <div class="shoppable-image__container" data-hotspot-container>
        {%- if section.settings.image != blank -%}
          {% render 'image',
            image: section.settings.image,
            class: 'shoppable-image__image',
            loading: 'lazy'
          %}
        {%- else -%}
          {{ 'lifestyle-1' | placeholder_svg_tag: 'shoppable-image__placeholder' }}
        {%- endif -%}

        {%- for block in section.blocks -%}
          {%- assign product = block.settings.product -%}

          <div
            class="hotspot hotspot--3d"
            style="top: {{ block.settings.position_y }}%; left: {{ block.settings.position_x }}%;"
            data-hotspot-x="{{ block.settings.position_x }}"
            data-hotspot-y="{{ block.settings.position_y }}"
            {{ block.shopify_attributes }}
          >
            <button
              type="button"
              class="hotspot__trigger hotspot__trigger--3d"
              aria-expanded="false"
              aria-controls="hotspot-card-{{ block.id }}"
              aria-label="{% if product != blank %}{{ product.title }}{% else %}Product details{% endif %}"
              data-hotspot-trigger
            >
              <span class="hotspot__dot hotspot__dot--3d"></span>
              <span class="hotspot__pulse"></span>
              <span class="hotspot__ring"></span>
            </button>

            <div
              id="hotspot-card-{{ block.id }}"
              class="hotspot__card"
              data-card-position="{{ block.settings.card_position }}"
              data-hotspot-card
            >
              <div class="hotspot__card-arrow" data-card-arrow></div>
              {%- if product != blank -%}
                <a href="{{ product.url }}" class="hotspot__product">
                  {%- if product.featured_image != blank -%}
                    <div class="hotspot__product-image">
                      {% render 'image', image: product.featured_image, width: 200 %}
                    </div>
                  {%- endif -%}

                  <div class="hotspot__product-info">
                    <h4 class="hotspot__product-title">{{ product.title }}</h4>

                    {%- if block.settings.show_vendor and product.vendor != blank -%}
                      <p class="hotspot__product-vendor">{{ product.vendor }}</p>
                    {%- endif -%}

                    <div class="hotspot__product-price">
                      {%- if product.compare_at_price > product.price -%}
                        <span class="hotspot__price hotspot__price--sale">
                          {{ product.price | money }}
                        </span>
                        <span class="hotspot__price hotspot__price--compare">
                          {{ product.compare_at_price | money }}
                        </span>
                      {%- else -%}
                        <span class="hotspot__price">{{ product.price | money }}</span>
                      {%- endif -%}
                    </div>
                  </div>
                </a>

                {%- if block.settings.show_quick_add and product.available -%}
                  {%- if product.variants.size == 1 -%}
                    <form action="{{ routes.cart_add_url }}" method="post" class="hotspot__form">
                      <input type="hidden" name="id" value="{{ product.first_available_variant.id }}">
                      <button type="submit" class="button button--primary button--small hotspot__add-btn">
                        {{ 'products.product.add_to_cart' | t }}
                      </button>
                    </form>
                  {%- else -%}
                    <a href="{{ product.url }}" class="button button--secondary button--small hotspot__add-btn">
                      {{ 'products.card.view_product' | t }}
                    </a>
                  {%- endif -%}
                {%- endif -%}

              {%- else -%}
                <div class="hotspot__empty">
                  <p>Select a product</p>
                </div>
              {%- endif -%}

              <button
                type="button"
                class="hotspot__close"
                aria-label="{{ 'general.accessibility.close' | t }}"
                data-hotspot-close
              >
                {% render 'icon', name: 'close', size: 16 %}
              </button>
            </div>
          </div>
        {%- endfor -%}
      </div>

      {%- if section.settings.show_product_list -%}
        <aside class="shoppable-image__sidebar">
          <h3 class="shoppable-image__sidebar-title">{{ section.settings.sidebar_title | default: 'Featured products' }}</h3>
          <ul class="shoppable-image__product-list" role="list">
            {%- for block in section.blocks -%}
              {%- assign product = block.settings.product -%}
              {%- if product != blank -%}
                <li class="shoppable-image__list-item">
                  <a href="{{ product.url }}" class="shoppable-image__list-product">
                    {%- if product.featured_image != blank -%}
                      <div class="shoppable-image__list-image">
                        {% render 'image', image: product.featured_image, width: 80 %}
                      </div>
                    {%- endif -%}
                    <div class="shoppable-image__list-info">
                      <span class="shoppable-image__list-title">{{ product.title }}</span>
                      <span class="shoppable-image__list-price">{{ product.price | money }}</span>
                    </div>
                  </a>
                </li>
              {%- endif -%}
            {%- endfor -%}
          </ul>
        </aside>
      {%- endif -%}
    </div>
  </div>
</section>

{% stylesheet %}
  .shoppable-image__header {
    text-align: center;
    margin-block-end: var(--space-8);
  }

  .shoppable-image__subtitle {
    font-size: var(--font-size-sm);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-secondary);
    margin-block-end: var(--space-2);
  }

  .shoppable-image__title {
    font-size: var(--font-size-2xl);
    margin: 0;
  }

  .shoppable-image__wrapper {
    display: grid;
    gap: var(--space-6);
  }

  @media (min-width: 64rem) {
    .shoppable-image__wrapper {
      grid-template-columns: 1fr 18rem;
    }
  }

  .shoppable-image__container {
    position: relative;
    border-radius: var(--radius-lg);
    overflow: visible;
  }

  .shoppable-image__image {
    display: block;
    width: 100%;
    height: auto;
    border-radius: var(--radius-lg);
  }

  .shoppable-image__placeholder {
    width: 100%;
    aspect-ratio: 16 / 9;
    background-color: var(--color-background-secondary);
  }

  /* Hotspot */
  .hotspot {
    position: absolute;
    z-index: 10;
    transform: translate(-50%, -50%);
  }

  .hotspot__trigger {
    position: relative;
    width: var(--hotspot-size, 32px);
    height: var(--hotspot-size, 32px);
    padding: 0;
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* 3D Effect Styles */
  .hotspot__trigger--3d {
    perspective: 100px;
    transform-style: preserve-3d;
  }

  .hotspot__dot--3d {
    position: absolute;
    inset: 0;
    background: linear-gradient(145deg, var(--hotspot-color, var(--color-secondary)), color-mix(in srgb, var(--hotspot-color, var(--color-secondary)) 80%, #000));
    border: 3px solid white;
    border-radius: 50%;
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.3),
      0 2px 4px rgba(0, 0, 0, 0.2),
      inset 0 2px 4px rgba(255, 255, 255, 0.3),
      inset 0 -2px 4px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s;
    transform: translateZ(0);
  }

  .hotspot__trigger--3d:hover .hotspot__dot--3d,
  .hotspot__trigger--3d[aria-expanded="true"] .hotspot__dot--3d {
    transform: translateZ(8px) scale(1.1);
    box-shadow:
      0 8px 20px rgba(0, 0, 0, 0.35),
      0 4px 8px rgba(0, 0, 0, 0.25),
      inset 0 2px 4px rgba(255, 255, 255, 0.4),
      inset 0 -2px 4px rgba(0, 0, 0, 0.2);
  }

  .hotspot__ring {
    position: absolute;
    inset: -4px;
    border: 2px solid var(--hotspot-color, var(--color-secondary));
    border-radius: 50%;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 0.3s, transform 0.3s;
  }

  .hotspot__trigger--3d:hover .hotspot__ring,
  .hotspot__trigger--3d[aria-expanded="true"] .hotspot__ring {
    opacity: 0.4;
    transform: scale(1.3);
  }

  .hotspot__dot {
    position: absolute;
    inset: 0;
    background-color: var(--hotspot-color, var(--color-secondary));
    border: 3px solid white;
    border-radius: 50%;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    transition: transform var(--duration-fast) var(--ease-default);
  }

  .hotspot__trigger:hover .hotspot__dot,
  .hotspot__trigger[aria-expanded="true"] .hotspot__dot {
    transform: scale(1.15);
  }

  .hotspot__pulse {
    position: absolute;
    inset: -6px;
    background-color: var(--hotspot-pulse-color, var(--color-secondary));
    border-radius: 50%;
    opacity: 0;
    animation: hotspot-pulse 2s infinite;
  }

  @keyframes hotspot-pulse {
    0% {
      transform: scale(0.8);
      opacity: 0.6;
    }
    100% {
      transform: scale(1.8);
      opacity: 0;
    }
  }

  .hotspot__trigger:hover .hotspot__pulse,
  .hotspot__trigger[aria-expanded="true"] .hotspot__pulse {
    animation: none;
    opacity: 0;
  }

  /* Card Arrow (Pointer) */
  .hotspot__card-arrow {
    position: absolute;
    width: 12px;
    height: 12px;
    background: var(--card-bg, var(--color-background));
    border: 1px solid var(--color-border);
    transform: rotate(45deg);
    z-index: -1;
  }

  /* Hotspot Card - Smart Positioning */
  .hotspot__card {
    position: absolute;
    z-index: 20;
    width: var(--card-width, 240px);
    background-color: var(--card-bg, var(--color-background));
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.18), 0 4px 12px rgba(0, 0, 0, 0.1);
    opacity: 0;
    visibility: hidden;
    transition:
      opacity 0.25s ease,
      visibility 0.25s ease,
      transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    pointer-events: none;
    overflow: visible;
  }

  .hotspot__card.is-open {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
  }

  .hotspot__close {
    position: absolute;
    top: var(--space-2);
    right: var(--space-2);
    display: flex;
    padding: var(--space-1);
    color: var(--color-text-secondary);
    background: rgba(255, 255, 255, 0.9);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    transition: color var(--duration-fast) var(--ease-default), background var(--duration-fast);
    z-index: 5;
  }

  .hotspot__close:hover {
    color: var(--color-text);
    background: #fff;
  }

  .hotspot__product {
    display: block;
    padding: var(--space-3);
    text-decoration: none;
    color: inherit;
  }

  .hotspot__product-image {
    aspect-ratio: 1;
    overflow: hidden;
    border-radius: var(--radius-sm);
    margin-block-end: var(--space-3);
    background-color: var(--color-background-secondary);
  }

  .hotspot__product-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .hotspot__product-info {
    text-align: center;
  }

  .hotspot__product-title {
    margin: 0 0 var(--space-1);
    font-size: var(--font-size-sm);
    font-weight: 600;
    line-height: 1.3;
  }

  .hotspot__product-vendor {
    margin: 0 0 var(--space-2);
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
  }

  .hotspot__product-price {
    display: flex;
    justify-content: center;
    gap: var(--space-2);
    font-size: var(--font-size-sm);
  }

  .hotspot__price--sale {
    color: var(--color-sale);
    font-weight: 600;
  }

  .hotspot__price--compare {
    color: var(--color-text-secondary);
    text-decoration: line-through;
  }

  .hotspot__form {
    padding: 0 var(--space-3) var(--space-3);
  }

  .hotspot__add-btn {
    width: 100%;
  }

  .hotspot__empty {
    padding: var(--space-6);
    text-align: center;
    color: var(--color-text-secondary);
  }

  /* Sidebar Product List */
  .shoppable-image__sidebar {
    background-color: var(--color-background-secondary);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
  }

  .shoppable-image__sidebar-title {
    font-size: var(--font-size-base);
    margin: 0 0 var(--space-4);
  }

  .shoppable-image__product-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .shoppable-image__list-item + .shoppable-image__list-item {
    margin-block-start: var(--space-3);
    padding-block-start: var(--space-3);
    border-block-start: 1px solid var(--color-border);
  }

  .shoppable-image__list-product {
    display: flex;
    gap: var(--space-3);
    text-decoration: none;
    color: inherit;
  }

  .shoppable-image__list-image {
    width: 4rem;
    flex-shrink: 0;
    aspect-ratio: 1;
    overflow: hidden;
    border-radius: var(--radius-sm);
    background-color: var(--color-background);
  }

  .shoppable-image__list-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .shoppable-image__list-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
    min-width: 0;
  }

  .shoppable-image__list-title {
    font-size: var(--font-size-sm);
    font-weight: 500;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .shoppable-image__list-price {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }

  /* Mobile Responsive */
  @media (max-width: 640px) {
    .hotspot__card {
      max-width: calc(100vw - 40px);
    }
  }
{% endstylesheet %}

{% javascript %}
  class ShoppableImage {
    constructor() {
      this.section = document.querySelector('[data-section-id]');
      if (!this.section) return;

      this.container = this.section.querySelector('[data-hotspot-container]');
      if (!this.container) return;

      this.hotspots = this.section.querySelectorAll('.hotspot');
      this.activeCard = null;

      this.init();
    }

    init() {
      this.hotspots.forEach(hotspot => {
        const trigger = hotspot.querySelector('[data-hotspot-trigger]');
        const card = hotspot.querySelector('[data-hotspot-card]');
        const closeBtn = hotspot.querySelector('[data-hotspot-close]');

        if (!trigger || !card) return;

        // Toggle on click
        trigger.addEventListener('click', (e) => {
          e.stopPropagation();
          this.toggleCard(trigger, card, hotspot);
        });

        // Close button
        closeBtn?.addEventListener('click', (e) => {
          e.stopPropagation();
          this.closeCard(trigger, card);
        });

        // Keyboard navigation
        trigger.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            this.toggleCard(trigger, card, hotspot);
          }
          if (e.key === 'Escape') {
            this.closeCard(trigger, card);
          }
        });
      });

      // Close on outside click
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.hotspot') && this.activeCard) {
          this.closeAllCards();
        }
      });

      // Close on escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && this.activeCard) {
          this.closeAllCards();
        }
      });

      // Reposition cards on resize
      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          if (this.activeCard) {
            const trigger = this.section.querySelector('[aria-expanded="true"]');
            if (trigger) {
              const hotspot = trigger.closest('.hotspot');
              this.positionCard(hotspot, this.activeCard);
            }
          }
        }, 100);
      });
    }

    /**
     * Smart card positioning that keeps cards within the container bounds
     */
    positionCard(hotspot, card) {
      const preferredPosition = card.dataset.cardPosition || 'bottom';
      const arrow = card.querySelector('[data-card-arrow]');

      // Reset any inline styles from previous positioning
      card.style.cssText = '';
      if (arrow) arrow.style.cssText = '';

      // Get measurements
      const containerRect = this.container.getBoundingClientRect();
      const hotspotRect = hotspot.getBoundingClientRect();
      const cardWidth = card.offsetWidth;
      const cardHeight = card.offsetHeight;

      // Calculate hotspot center relative to container
      const hotspotCenterX = hotspotRect.left + hotspotRect.width / 2 - containerRect.left;
      const hotspotCenterY = hotspotRect.top + hotspotRect.height / 2 - containerRect.top;

      const gap = 14; // Space between hotspot and card
      const edgePadding = 12; // Minimum padding from container edge
      const arrowSize = 12; // Arrow dimensions

      let cardLeft, cardTop;
      let arrowLeft, arrowTop;
      let finalPosition = preferredPosition;

      // Calculate available space in each direction
      const spaceAbove = hotspotCenterY - edgePadding;
      const spaceBelow = containerRect.height - hotspotCenterY - edgePadding;
      const spaceLeft = hotspotCenterX - edgePadding;
      const spaceRight = containerRect.width - hotspotCenterX - edgePadding;

      // Determine best position based on available space
      const canFit = (pos) => {
        switch (pos) {
          case 'bottom': return spaceBelow >= cardHeight + gap;
          case 'top': return spaceAbove >= cardHeight + gap;
          case 'right': return spaceRight >= cardWidth + gap;
          case 'left': return spaceLeft >= cardWidth + gap;
          default: return false;
        }
      };

      // Try preferred position first, then fallbacks
      const positionOrder = [preferredPosition];
      if (preferredPosition === 'bottom' || preferredPosition === 'top') {
        positionOrder.push(preferredPosition === 'bottom' ? 'top' : 'bottom', 'right', 'left');
      } else {
        positionOrder.push(preferredPosition === 'right' ? 'left' : 'right', 'bottom', 'top');
      }

      for (const pos of positionOrder) {
        if (canFit(pos)) {
          finalPosition = pos;
          break;
        }
      }

      // Position the card based on final position
      switch (finalPosition) {
        case 'bottom':
          cardTop = hotspotCenterY + hotspotRect.height / 2 + gap;
          cardLeft = Math.max(edgePadding, Math.min(hotspotCenterX - cardWidth / 2, containerRect.width - cardWidth - edgePadding));
          arrowTop = -arrowSize / 2 - 1;
          arrowLeft = hotspotCenterX - cardLeft - arrowSize / 2;
          break;

        case 'top':
          cardTop = hotspotCenterY - hotspotRect.height / 2 - gap - cardHeight;
          cardLeft = Math.max(edgePadding, Math.min(hotspotCenterX - cardWidth / 2, containerRect.width - cardWidth - edgePadding));
          arrowTop = cardHeight - arrowSize / 2 - 1;
          arrowLeft = hotspotCenterX - cardLeft - arrowSize / 2;
          break;

        case 'right':
          cardLeft = hotspotCenterX + hotspotRect.width / 2 + gap;
          cardTop = Math.max(edgePadding, Math.min(hotspotCenterY - cardHeight / 2, containerRect.height - cardHeight - edgePadding));
          arrowLeft = -arrowSize / 2 - 1;
          arrowTop = hotspotCenterY - cardTop - arrowSize / 2;
          break;

        case 'left':
          cardLeft = hotspotCenterX - hotspotRect.width / 2 - gap - cardWidth;
          cardTop = Math.max(edgePadding, Math.min(hotspotCenterY - cardHeight / 2, containerRect.height - cardHeight - edgePadding));
          arrowLeft = cardWidth - arrowSize / 2 - 1;
          arrowTop = hotspotCenterY - cardTop - arrowSize / 2;
          break;
      }

      // Clamp arrow position to stay within card
      arrowLeft = Math.max(arrowSize, Math.min(arrowLeft, cardWidth - arrowSize * 2));
      arrowTop = Math.max(arrowSize, Math.min(arrowTop, cardHeight - arrowSize * 2));

      // Apply positioning
      card.style.position = 'absolute';
      card.style.left = `${cardLeft}px`;
      card.style.top = `${cardTop}px`;
      card.style.transform = 'none';

      if (arrow) {
        arrow.style.position = 'absolute';
        arrow.style.left = `${arrowLeft}px`;
        arrow.style.top = `${arrowTop}px`;
      }
    }

    toggleCard(trigger, card, hotspot) {
      const isOpen = card.classList.contains('is-open');

      // Close any other open cards first
      this.closeAllCards();

      if (!isOpen) {
        // Position the card smartly before showing
        this.positionCard(hotspot, card);

        // Show with animation
        requestAnimationFrame(() => {
          card.classList.add('is-open');
          trigger.setAttribute('aria-expanded', 'true');
          this.activeCard = card;
        });
      }
    }

    closeCard(trigger, card) {
      card.classList.remove('is-open');
      trigger.setAttribute('aria-expanded', 'false');
      this.activeCard = null;
    }

    closeAllCards() {
      this.hotspots.forEach(hotspot => {
        const trigger = hotspot.querySelector('[data-hotspot-trigger]');
        const card = hotspot.querySelector('[data-hotspot-card]');
        if (trigger && card) {
          this.closeCard(trigger, card);
        }
      });
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    new ShoppableImage();
  });
{% endjavascript %}

{% schema %}
{
  "name": "Shoppable image",
  "tag": "section",
  "class": "section-shoppable-image",
  "settings": [
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Shop the look"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Product list"
    },
    {
      "type": "checkbox",
      "id": "show_product_list",
      "label": "Show product list sidebar",
      "default": true
    },
    {
      "type": "text",
      "id": "sidebar_title",
      "label": "Sidebar title",
      "default": "Featured products"
    },
    {
      "type": "header",
      "content": "Hotspot styling"
    },
    {
      "type": "range",
      "id": "hotspot_size",
      "label": "Hotspot size",
      "min": 24,
      "max": 48,
      "step": 4,
      "default": 32,
      "unit": "px"
    },
    {
      "type": "color",
      "id": "hotspot_color",
      "label": "Hotspot color",
      "default": "#334FB4"
    },
    {
      "type": "color",
      "id": "hotspot_pulse_color",
      "label": "Pulse animation color",
      "default": "#334FB4"
    },
    {
      "type": "header",
      "content": "Product card"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card background",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "card_width",
      "label": "Card width",
      "min": 180,
      "max": 320,
      "step": 20,
      "default": 240,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "hotspot",
      "name": "Product hotspot",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "range",
          "id": "position_x",
          "label": "Horizontal position",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50,
          "unit": "%"
        },
        {
          "type": "range",
          "id": "position_y",
          "label": "Vertical position",
          "min": 0,
          "max": 100,
          "step": 1,
          "default": 50,
          "unit": "%"
        },
        {
          "type": "select",
          "id": "card_position",
          "label": "Preferred card position",
          "options": [
            { "value": "bottom", "label": "Below" },
            { "value": "top", "label": "Above" },
            { "value": "left", "label": "Left" },
            { "value": "right", "label": "Right" }
          ],
          "default": "bottom",
          "info": "Card will automatically adjust if there's not enough space"
        },
        {
          "type": "checkbox",
          "id": "show_vendor",
          "label": "Show vendor",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "show_quick_add",
          "label": "Show add to cart button",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Shoppable image",
      "blocks": [
        { "type": "hotspot", "settings": { "position_x": 30, "position_y": 40 } },
        { "type": "hotspot", "settings": { "position_x": 70, "position_y": 60 } }
      ]
    }
  ]
}
{% endschema %}
