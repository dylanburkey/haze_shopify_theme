{%- comment -%}
  Product Attachments Display
  Shows downloadable documentation from product metafields
  Usage: {% render 'product-attachments', product: product %}
{%- endcomment -%}

{%- liquid
  assign has_attachments = false
  if product.metafields.attachments.spec_sheet or product.metafields.attachments.user_manual or product.metafields.attachments.safety_data or product.metafields.attachments.cad_file or product.metafields.attachments.warranty or product.metafields.attachments.custom_docs
    assign has_attachments = true
  endif
-%}

{%- if has_attachments -%}
  <div class="product-attachments">
    <h3 class="attachments-heading">
      <svg class="attachments-heading__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14 2 14 8 20 8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10 9 9 9 8 9"></polyline>
      </svg>
      {{ 'products.attachments.heading' | t | default: 'Product Documentation' }}
    </h3>

    <ul class="attachments-list">
      {%- if product.metafields.attachments.spec_sheet -%}
        <li class="attachment-item">
          <a href="{{ product.metafields.attachments.spec_sheet | file_url }}"
             target="_blank"
             rel="noopener"
             class="attachment-link"
             download>
            <span class="attachment-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
            </span>
            <span class="attachment-name">{{ 'products.attachments.spec_sheet' | t | default: 'Specification Sheet' }}</span>
            <span class="attachment-type">PDF</span>
          </a>
        </li>
      {%- endif -%}

      {%- if product.metafields.attachments.user_manual -%}
        <li class="attachment-item">
          <a href="{{ product.metafields.attachments.user_manual | file_url }}"
             target="_blank"
             rel="noopener"
             class="attachment-link"
             download>
            <span class="attachment-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
              </svg>
            </span>
            <span class="attachment-name">{{ 'products.attachments.user_manual' | t | default: 'User Manual' }}</span>
            <span class="attachment-type">PDF</span>
          </a>
        </li>
      {%- endif -%}

      {%- if product.metafields.attachments.safety_data -%}
        <li class="attachment-item attachment-item--safety">
          <a href="{{ product.metafields.attachments.safety_data | file_url }}"
             target="_blank"
             rel="noopener"
             class="attachment-link"
             download>
            <span class="attachment-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg>
            </span>
            <span class="attachment-name">{{ 'products.attachments.safety_data' | t | default: 'Safety Data Sheet (SDS)' }}</span>
            <span class="attachment-type">PDF</span>
          </a>
        </li>
      {%- endif -%}

      {%- if product.metafields.attachments.cad_file -%}
        <li class="attachment-item">
          <a href="{{ product.metafields.attachments.cad_file | file_url }}"
             target="_blank"
             rel="noopener"
             class="attachment-link"
             download>
            <span class="attachment-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                <polyline points="2 17 12 22 22 17"></polyline>
                <polyline points="2 12 12 17 22 12"></polyline>
              </svg>
            </span>
            <span class="attachment-name">{{ 'products.attachments.cad_file' | t | default: 'CAD / 3D Model' }}</span>
            <span class="attachment-type">DWG/STEP</span>
          </a>
        </li>
      {%- endif -%}

      {%- if product.metafields.attachments.warranty -%}
        <li class="attachment-item">
          <a href="{{ product.metafields.attachments.warranty | file_url }}"
             target="_blank"
             rel="noopener"
             class="attachment-link"
             download>
            <span class="attachment-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
              </svg>
            </span>
            <span class="attachment-name">{{ 'products.attachments.warranty' | t | default: 'Warranty Information' }}</span>
            <span class="attachment-type">PDF</span>
          </a>
        </li>
      {%- endif -%}

      {%- if product.metafields.attachments.custom_docs -%}
        {%- for doc in product.metafields.attachments.custom_docs.value -%}
          <li class="attachment-item">
            <a href="{{ doc | file_url }}"
               target="_blank"
               rel="noopener"
               class="attachment-link"
               download>
              <span class="attachment-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="7 10 12 15 17 10"></polyline>
                  <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
              </span>
              <span class="attachment-name">{{ doc.alt | default: 'Document' }}</span>
              <span class="attachment-type">{{ doc.media_type | split: '/' | last | upcase }}</span>
            </a>
          </li>
        {%- endfor -%}
      {%- endif -%}
    </ul>
  </div>
{%- endif -%}
