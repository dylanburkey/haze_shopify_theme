{%- comment -%}
  Responsive Hero Image with Art Direction

  Uses picture element with different image crops for mobile/tablet/desktop.
  Allows for art direction - showing different parts of the image at different sizes.

  @param {image} image_desktop - Desktop image (1200px+)
  @param {image} image_tablet - Tablet image (768-1199px, optional, falls back to desktop)
  @param {image} image_mobile - Mobile image (<768px, optional, falls back to tablet/desktop)
  @param {string} alt - Alt text
  @param {string} class - CSS class name
  @param {string} loading - Loading strategy: 'lazy' or 'eager' (default: 'lazy')
  @param {string} focal_point - CSS object-position (default: 'center')

  @example
  {% render 'responsive-image-hero',
    image_desktop: section.settings.image,
    image_mobile: section.settings.image_mobile,
    alt: section.settings.heading,
    class: 'hero-image',
    loading: 'eager'
  %}
{%- endcomment -%}

{%- liquid
  assign img_desktop = image_desktop
  assign img_tablet = image_tablet | default: img_desktop
  assign img_mobile = image_mobile | default: img_tablet
  assign img_alt = alt | default: img_desktop.alt | default: ''
  assign img_class = class | default: ''
  assign img_loading = loading | default: 'lazy'
  assign focal = focal_point | default: 'center'
-%}

{%- if img_desktop != blank -%}
  <picture>
    {%- comment -%} Desktop: 1200px+ with 2x retina support {%- endcomment -%}
    <source
      media="(min-width: 1200px)"
      srcset="
        {{ img_desktop | image_url: width: 1200 }} 1200w,
        {{ img_desktop | image_url: width: 1600 }} 1600w,
        {{ img_desktop | image_url: width: 2000 }} 2000w,
        {{ img_desktop | image_url: width: 2400 }} 2400w
      "
      sizes="100vw"
      width="{{ img_desktop.width }}"
      height="{{ img_desktop.height }}"
    >

    {%- comment -%} Tablet: 768px - 1199px {%- endcomment -%}
    {%- if img_tablet != blank -%}
      <source
        media="(min-width: 768px)"
        srcset="
          {{ img_tablet | image_url: width: 800 }} 800w,
          {{ img_tablet | image_url: width: 1000 }} 1000w,
          {{ img_tablet | image_url: width: 1200 }} 1200w,
          {{ img_tablet | image_url: width: 1600 }} 1600w
        "
        sizes="100vw"
        width="{{ img_tablet.width }}"
        height="{{ img_tablet.height }}"
      >
    {%- endif -%}

    {%- comment -%} Mobile: < 768px {%- endcomment -%}
    {%- if img_mobile != blank -%}
      <source
        media="(max-width: 767px)"
        srcset="
          {{ img_mobile | image_url: width: 400 }} 400w,
          {{ img_mobile | image_url: width: 600 }} 600w,
          {{ img_mobile | image_url: width: 800 }} 800w,
          {{ img_mobile | image_url: width: 1000 }} 1000w
        "
        sizes="100vw"
        width="{{ img_mobile.width }}"
        height="{{ img_mobile.height }}"
      >
    {%- endif -%}

    {%- comment -%} Fallback img {%- endcomment -%}
    <img
      src="{{ img_desktop | image_url: width: 1600 }}"
      alt="{{ img_alt | escape }}"
      loading="{{ img_loading }}"
      width="{{ img_desktop.width }}"
      height="{{ img_desktop.height }}"
      {%- if img_class != blank %} class="{{ img_class }}"{% endif %}
      style="object-fit: cover; object-position: {{ focal }}; width: 100%; height: 100%;"
    >
  </picture>
{%- else -%}
  <div class="responsive-image-placeholder {{ img_class }}">
    {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}
  </div>
{%- endif -%}
